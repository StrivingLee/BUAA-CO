# P6 往年题

## 2019

### 第三次

- 第一题：bgezalr

  $$\begin{aligned} & condition \leftarrow GPR[rs] \ge 0 \\ & GPR[rd] \leftarrow PC + 8 \\ & \operatorname{if}\ condition\ \operatorname{then} \\ & \qquad PC \leftarrow GPR[rt] \\ \end{aligned}$$

  甚至比 `blezalc` 还简单一点。

- 第二题：msub
  $$
  temp \leftarrow (HI \mid\mid LO) - (GPR[rs] * GPR[rt])
  
  HI \leftarrow temp_{63..32}
  
  LO \leftarrow temp_{31..0}
  $$
  标准指令集里面有这个指令。

- 第三题：lhs

  $$\begin{aligned} & Addr \leftarrow GPR[base] + \operatorname{signed\_ext}(offset) \\ & memword \leftarrow memory[Addr] \\ & byte \leftarrow Addr_{1..0} \\ & \operatorname{if}\ byte = 0\ \operatorname{then} \\ & \qquad GPR[rt] \leftarrow \operatorname{signed\_ext}(memword_{7..0}) \\ & \operatorname{else}\ \operatorname{if}\ byte = 2\ \operatorname{then} \\ & \qquad GPR[rt] \leftarrow \operatorname{signed\_ext}(memword_{23..16}) \end{aligned}$$

  应该是这样的，记不太清了。

  可以把它看作是条件写的 `lh` 或者是 `lb`。



shl可以当一个信号吧，如果shl遇到乘除在工作就给一个信号，等到计算完再直接交换

可以置一个reg当作标记，如果不计算直接交换，计算的话就等算完的时候再直接反着赋值

lwer记得把W_RFDst改一下吧

阻所有用偶数寄存器并且at法的（，w转发不会t的吧

无脑阻塞一个到m，m级dstReg可以确定，这时候利用原来的架构就可以判断



jap直接译码阶段动手脚

把29和-4装rs和imm里
